<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù…Ø¹Ø±Ø¶ Ø¹Ø§Ù…</title>
<style>
  /* --- ØªØµÙ…ÙŠÙ… Ø¹Ø§Ù… --- */
  body {
    background: #121226;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    color: #ddd;
    margin: 0; padding: 20px;
  }
  h1 {
    text-align: center;
    font-size: 3rem;
    margin-bottom: 25px;
    color: #a8a0ff;
    text-shadow: 0 0 10px #8c85ff;
  }
  /* --- Ø£Ø²Ø±Ø§Ø± ÙˆØ­Ù‚ÙˆÙ„ --- */
  .upload-btn, .filter-btn, button.sort-btn {
    display: inline-flex;
    align-items: center;
    background: #5a3eae;
    padding: 12px 25px;
    font-size: 1.1rem;
    border-radius: 30px;
    cursor: pointer;
    border: none;
    color: #fff;
    box-shadow: 0 6px 15px #5a3eae99;
    transition: background 0.3s ease, box-shadow 0.3s ease;
    margin: 5px 10px;
    user-select: none;
  }
  .upload-btn:hover, .filter-btn:hover, button.sort-btn:hover {
    background: #7c62e0;
    box-shadow: 0 8px 20px #7c62e099;
  }
  .upload-btn svg {
    margin-left: 10px;
    stroke: #fff;
  }
  input[type="file"] {
    display: none;
  }
  .filter-container, .sort-container {
    text-align: center;
    margin-bottom: 20px;
  }
  /* --- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¨Ø­Ø« --- */
  .search-container {
    text-align: center;
    margin-bottom: 25px;
  }
  .search-input {
    width: 280px;
    max-width: 90%;
    padding: 12px 15px;
    font-size: 1rem;
    border-radius: 30px;
    border: none;
    box-shadow: inset 0 0 8px #5a3eae88;
    background: #292850;
    color: #eee;
    transition: box-shadow 0.3s ease;
  }
  .search-input::placeholder {
    color: #aaa;
  }
  .search-input:focus {
    outline: none;
    box-shadow: 0 0 15px #7c62e0ff;
    background: #3a3b68;
  }
  /* --- Ø´Ø¨ÙƒØ© Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª --- */
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(300px,1fr));
    gap: 26px;
  }
  /* --- ÙƒØ§Ø±Ø¯ Ø§Ø­ØªØ±Ø§ÙÙŠ --- */
  .card {
    background: linear-gradient(135deg, #5a3eaecc, #462f9bcc);
    border-radius: 26px;
    box-shadow:
      0 10px 40px rgba(90, 62, 174, 0.6),
      inset 0 0 30px rgba(255, 255, 255, 0.18);
    padding: 22px;
    color: #e6e6ff;
    position: relative;
    overflow: hidden;
    transition:
      transform 0.35s cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .card:hover {
    transform: translateY(-14px) scale(1.06);
    box-shadow:
      0 20px 50px rgba(90, 62, 174, 0.95),
      inset 0 0 40px rgba(255, 255, 255, 0.3);
  }
  .card img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 22px;
    margin-bottom: 20px;
    box-shadow: 0 10px 25px rgb(90 62 174 / 0.5);
    transition: transform 0.4s ease;
  }
  .card:hover img {
    transform: scale(1.1) translateY(-8px);
  }
  .file-placeholder {
    height: 180px;
    background: #3f3b57;
    border-radius: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    color: #b0aee7;
    margin-bottom: 20px;
    box-shadow: inset 0 0 15px #3f3b57cc;
    user-select: none;
  }
  .card .file-icon {
    font-size: 3.5rem;
    margin-bottom: 10px;
  }
  /* --- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù„Ù --- */
  .file-details {
    font-size: 0.85rem;
    margin-bottom: 15px;
    line-height: 1.4;
  }
  /* --- Ø±ÙˆØ§Ø¨Ø· ÙˆØ£Ø²Ø±Ø§Ø± --- */
  .actions {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px;
  }
  .actions a, .actions button {
    font-size: 0.9rem;
    text-decoration: none;
    color: #8da0ff;
    background: transparent;
    border: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    border-radius: 18px;
    transition: background 0.3s ease, color 0.3s ease;
    user-select: none;
  }
  .actions a:hover, .actions button:hover {
    color: #d0d7ff;
    background: rgba(141, 160, 255, 0.2);
  }
  button.delete-btn {
    background: #c84b4b;
    color: white !important;
    transition: background 0.3s ease;
  }
  button.delete-btn:hover {
    background: #ff6161;
  }
  /* --- Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ù„ÙØ§Øª --- */
  .icon-img::before { content: "ğŸ–¼ï¸"; }
  .icon-pdf::before { content: "ğŸ“•"; }
  .icon-doc::before { content: "ğŸ“„"; }
  .icon-xls::before { content: "ğŸ“Š"; }
  .icon-txt::before { content: "ğŸ“œ"; }
  .icon-zip::before { content: "ğŸ—œï¸"; }
  .icon-audio::before { content: "ğŸµ"; }
  .icon-video::before { content: "ğŸ¬"; }
  .icon-other::before { content: "ğŸ“"; }

  .file-icon {
    display: block;
    text-align: center;
    font-size: 3.5rem;
    margin-bottom: 10px;
  }

  /* --- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª --- */
  #drop-area {
    border: 3px dashed #5a3eae88;
    border-radius: 25px;
    padding: 40px;
    max-width: 600px;
    margin: 0 auto 40px;
    color: #aaa;
    text-align: center;
    font-size: 1.2rem;
    transition: border-color 0.3s ease, background-color 0.3s ease;
  }
  #drop-area.dragover {
    border-color: #7c62e0;
    background-color: #3a3b68;
    color: #e0e0ff;
  }
</style>
</head>
<body>

<h1>ğŸ“ Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„ØµÙˆØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ ÙˆØ§Ù„Ù…ØªØ·ÙˆØ±</h1>

<!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
<div id="drop-area">
  Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ù…Ù„ÙØ§ØªÙƒ Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± "Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª"
</div>

<label class="upload-btn" for="uploadFiles">
  Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v12m-3-3 3 3 3-3M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/></svg>
</label>
<input type="file" id="uploadFiles" multiple />

<div class="search-container">
  <input type="text" id="searchInput" class="search-input" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª ..." />
</div>

<div class="filter-container">
  <button class="filter-btn" onclick="filterFiles('all')">Ø§Ù„ÙƒÙ„</button>
  <button class="filter-btn" onclick="filterFiles('image')">ØµÙˆØ± ÙÙ‚Ø·</button>
  <button class="filter-btn" onclick="filterFiles('pdf')">PDF ÙÙ‚Ø·</button>
  <button class="filter-btn" onclick="filterFiles('doc')">Word ÙÙ‚Ø·</button>
  <button class="filter-btn" onclick="filterFiles('xls')">Excel ÙÙ‚Ø·</button>
  <button class="filter-btn" onclick="filterFiles('audio')">ØµÙˆØª ÙÙ‚Ø·</button>
  <button class="filter-btn" onclick="filterFiles('video')">ÙÙŠØ¯ÙŠÙˆ ÙÙ‚Ø·</button>
  <button class="filter-btn" onclick="filterFiles('file')">Ù…Ù„ÙØ§Øª ÙÙ‚Ø·</button>
</div>

<div class="sort-container">
  <button class="sort-btn" onclick="sortFiles('name')">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ø§Ù„Ø§Ø³Ù… â†‘â†“</button>
  <button class="sort-btn" onclick="sortFiles('size')">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ø§Ù„Ø­Ø¬Ù… â†‘â†“</button>
  <button class="sort-btn" onclick="sortFiles('type')">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ø§Ù„Ù†ÙˆØ¹ â†‘â†“</button>
</div>

<div class="gallery" id="gallery"></div>

<script>
  const gallery = document.getElementById('gallery');
  const uploadFiles = document.getElementById('uploadFiles');
  const searchInput = document.getElementById('searchInput');
  const dropArea = document.getElementById('drop-area');

  let filesList = [];
  let currentFilter = 'all';
  let sortOrder = {key:'name', asc:true};

  // --- Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø­Ø¬Ù… Ø¨ÙˆØ­Ø¯Ø§Øª Ù…Ù†Ø§Ø³Ø¨Ø© ---
  function formatFileSize(size) {
    if (size < 1024) return size + " Ø¨Ø§ÙŠØª";
    else if (size < 1024 * 1024) return (size / 1024).toFixed(1) + " ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª";
    else if (size < 1024 * 1024 * 1024) return (size / (1024 * 1024)).toFixed(2) + " Ù…ÙŠØºØ§Ø¨Ø§ÙŠØª";
    else return (size / (1024 * 1024 * 1024)).toFixed(2) + " ØºÙŠØºØ§Ø¨Ø§ÙŠØª";
  }

  // --- Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ---
  function getFileType(file) {
    const ext = file.name.split('.').pop().toLowerCase();
    const type = file.type;

    if (type.startsWith('image/')) return 'image';
    if (type === 'application/pdf' || ext === 'pdf') return 'pdf';
    if (
      type === 'application/msword' ||
      type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' ||
      ext === 'doc' || ext === 'docx'
    ) return 'doc';
    if (
      type === 'application/vnd.ms-excel' ||
      type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||
      ext === 'xls' || ext === 'xlsx'
    ) return 'xls';
    if (type.startsWith('audio/')) return 'audio';
    if (type.startsWith('video/')) return 'video';
    if (ext === 'txt') return 'txt';
    if (ext === 'zip' || ext === 'rar' || ext === '7z') return 'zip';
    return 'file';
  }

  // --- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ---
  function getIconClass(type) {
    switch(type) {
      case 'image': return 'icon-img';
      case 'pdf': return 'icon-pdf';
      case 'doc': return 'icon-doc';
      case 'xls': return 'icon-xls';
      case 'txt': return 'icon-txt';
      case 'zip': return 'icon-zip';
      case 'audio': return 'icon-audio';
      case 'video': return 'icon-video';
      default: return 'icon-other';
    }
  }

  // --- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ Ø§Ù„Ù…Ø¹Ø±Ø¶ ---
  function displayFiles() {
    gallery.innerHTML = '';

    let filtered = filesList.filter(f => {
      // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
      if (currentFilter !== 'all' && currentFilter !== f.type) return false;
      // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³Ù…
      if (!f.name.toLowerCase().includes(searchInput.value.toLowerCase())) return false;
      return true;
    });

    // Ø§Ù„ØªØ±ØªÙŠØ¨
    filtered.sort((a,b) => {
      let valA = a[sortOrder.key], valB = b[sortOrder.key];
      if (sortOrder.key === 'name' || sortOrder.key === 'type') {
        valA = valA.toLowerCase();
        valB = valB.toLowerCase();
      }
      if (valA < valB) return sortOrder.asc ? -1 : 1;
      if (valA > valB) return sortOrder.asc ? 1 : -1;
      return 0;
    });

    if (filtered.length === 0) {
      gallery.innerHTML = '<p style="text-align:center; color:#888; font-size:1.3rem;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©.</p>';
      return;
    }

    filtered.forEach(file => {
      const card = document.createElement('div');
      card.classList.add('card');

      if (file.type === 'image') {
        const img = document.createElement('img');
        img.src = file.url;
        img.alt = file.name;
        card.appendChild(img);
      } else {
        const placeholder = document.createElement('div');
        placeholder.className = 'file-placeholder';
        const icon = document.createElement('span');
        icon.className = 'file-icon ' + getIconClass(file.type);
        placeholder.appendChild(icon);
        const nameText = document.createElement('div');
        nameText.textContent = file.name;
        nameText.style.fontWeight = '600';
        placeholder.appendChild(nameText);
        card.appendChild(placeholder);
      }

      // ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
      const details = document.createElement('div');
      details.className = 'file-details';
      details.innerHTML = `<b>Ø§Ù„Ø§Ø³Ù…:</b> ${file.name} <br> <b>Ø§Ù„Ø­Ø¬Ù…:</b> ${formatFileSize(file.size)} <br> <b>Ø§Ù„Ù†ÙˆØ¹:</b> ${file.type}`;
      card.appendChild(details);

      // Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
      const actions = document.createElement('div');
      actions.className = 'actions';

      // Ø²Ø± ØªÙ†Ø²ÙŠÙ„ (Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª)
      const downloadLink = document.createElement('a');
      downloadLink.href = file.url;
      downloadLink.download = file.name;
      downloadLink.textContent = "ØªÙ†Ø²ÙŠÙ„";
      downloadLink.title = "ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù";
      actions.appendChild(downloadLink);

      // Ø²Ø± Ø§Ù„Ø­Ø°Ù
      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = "Ø­Ø°Ù";
      deleteBtn.className = 'delete-btn';
      deleteBtn.title = "Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ù…Ù† Ø§Ù„Ø¹Ø±Ø¶";
      deleteBtn.onclick = () => {
        filesList = filesList.filter(f => f.id !== file.id);
        URL.revokeObjectURL(file.url);
        displayFiles();
      };
      actions.appendChild(deleteBtn);

      card.appendChild(actions);
      gallery.appendChild(card);
    });
  }

  // --- Ø¥Ø¶Ø§ÙØ© Ù…Ù„ÙØ§Øª ---
  function addFiles(newFiles) {
    for (const file of newFiles) {
      // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ù„Ù Ù…Ø¹ Ø±Ø§Ø¨Ø· URL Ù„Ø¥Ù†Ø´Ø§Ø¡ preview Ù„Ù„ØµÙˆØ±
      filesList.push({
        id: crypto.randomUUID(),
        file: file,
        name: file.name,
        size: file.size,
        type: getFileType(file),
        url: URL.createObjectURL(file)
      });
    }
    displayFiles();
  }

  // --- Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø±ÙØ¹ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø²Ø± ---
  uploadFiles.addEventListener('change', e => {
    addFiles(e.target.files);
    uploadFiles.value = ''; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù†ØµØ± Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø±ÙØ¹ Ù†ÙØ³ Ø§Ù„Ù…Ù„Ù Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
  });

  // --- Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª ---
  dropArea.addEventListener('dragover', e => {
    e.preventDefault();
    dropArea.classList.add('dragover');
  });
  dropArea.addEventListener('dragleave', e => {
    dropArea.classList.remove('dragover');
  });
  dropArea.addEventListener('drop', e => {
    e.preventDefault();
    dropArea.classList.remove('dragover');
    if (e.dataTransfer.files.length > 0) {
      addFiles(e.dataTransfer.files);
    }
  });

  // --- ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ---
  function filterFiles(type) {
    currentFilter = type;
    displayFiles();
  }

  // --- ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ù„ÙØ§Øª ---
  function sortFiles(key) {
    if (sortOrder.key === key) {
      sortOrder.asc = !sortOrder.asc;
    } else {
      sortOrder.key = key;
      sortOrder.asc = true;
    }
    displayFiles();
  }

  // --- Ø¨Ø­Ø« Ù…Ø¨Ø§Ø´Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø© ---
  searchInput.addEventListener('input', () => {
    displayFiles();
  });

  // --- Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø±Ø¶ ÙØ§Ø±Øº --
  displayFiles();
</script>

</body>
</html>
